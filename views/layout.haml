!!! 5
%html{:lang => 'en'}
  %head
    %meta{"http-equiv" => "X-UA-Compatible", :content => "IE=edge,chrome=1" }
    %meta{ :charset => "utf-8" }
    %title= @title || 'Hack Reactions'
    %link{ :rel=> 'stylesheet', :href=>"http://yui.yahooapis.com/pure/0.6.0/pure-min.css"}
    %meta{ :name=> 'viewport', :content=>'width=device-width, initial-scale=1' }
  %body
    .container
      = yield
    :javascript
      window.onload = function() {
        (function() {

          var show = function(el){
            return function(msg){ el.innerHTML = msg + '<br />' + el.innerHTML; }
          }(document.getElementById('msgs'));



          var ws = new WebSocket('ws://' + window.location.host + window.location.pathname);
          ws.onopen = function() { show('websocket opened') };
          ws.onclose = function() { show('websocket closed') }


        })();
      }
